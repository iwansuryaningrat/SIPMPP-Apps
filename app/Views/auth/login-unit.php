<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><?= $title; ?></title>

    <!-- meta data -->
    <meta name="title" content="SIPMPP UNDIP">
    <meta name="description" content="SIPMPP merupakan Sistem Informasi Penjaminan Mutu Penelitian dan Pengabdian Universitas Diponegoro.">
    <meta name="keywords" content="sipmpp, sipma, undip, penelitian, pengabdian, mutu">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="language" content="English">
    <meta name="author" content="teamsipmppundip2019">
    <meta name="copyright" content="Â© 2022 teamsipmpppundip">

    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" />
    <!-- fontawesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.1.0/css/solid.css" integrity="sha384-ltWlpN+Dl8XfKEnC9oW+dDRF8Z7jsYkxQ/WMRoJ2VHH5G2nQZ4if2NWwmV0ybzZ7" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.1.0/css/fontawesome.css" integrity="sha384-RLM8Rxp/DcBfCfSI3bGwwoMMxxy34D2e58WAqXmmdnh0WYlAQ8jeOB3A1ed5KUSm" crossorigin="anonymous" />
    <!-- custom -->
    <link rel="stylesheet" href="/assets/css/styles.css" />
    <link rel="stylesheet" href="/assets/css/styles-login.css" />

    <!-- appletochicon -->
    <link rel="shortcut icon" href="/assets/img/icon/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icon/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icon/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icon/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icon/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icon/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icon/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icon/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/icon/apple-touch-icon-180x180.png" />
</head>

<body>
    <div class="container__login">
        <div class="login__content">
            <!-- left -->
            <div class="login__content-left">
                <div class="content-left__bg">
                    <div id="carouselExampleCaptions" class="carousel slide content-left__carousel" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
                            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
                        </div>
                        <div class="carousel-inner carousel__inner">
                            <div class="carousel-item active carousel__item">
                                <h3 class="carousel__item-title">Sistem Informasi Penjaminan Mutu Penelitian dan
                                    Pengabdian Universitas Diponegoro
                                </h3>
                                <div class="carousel-caption carousel__caption d-none d-md-block">
                                    <h5>Selamat Datang di SIPMPP UNDIP <span id="year__now"></span></h5>
                                    <p>Menjadi Agen Pembaharu Pendidikan Melalui Pengembangan Sistem Pendidikan yang
                                        handal.</p>
                                </div>
                            </div>
                            <div class="carousel-item carousel__item">
                                <div class="carousel-caption carousel__caption d-none d-md-block">
                                    <h5>SIPMPP UNDIP</h5>
                                    <p>Mengembangkan LP2MP sebagai pusat penelitian, pengkajian metode pembelajaran,
                                        penjaminan mutu pendidikan tinggi, pusat konsultasi, dan pelayanan pengembangan
                                        pembelajaran.</p>
                                </div>
                            </div>
                            <div class="carousel-item carousel__item">
                                <h3 class="carousel__item-title">Gedung ICT Center</h3>
                                <div class="carousel__item-map__content">
                                    <div class="carousel__item-map">
                                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3959.6120051633497!2d110.43685551478825!3d-7.054793794904621!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e708c1d399ff9f9%3A0x2d2033fed8e955dd!2sGedung%20ICT%20Undip!5e0!3m2!1sen!2sid!4v1648699051976!5m2!1sen!2sid" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                                    </div>
                                </div>
                                <div class="carousel-caption carousel__caption d-none d-md-block">
                                    <p>Gedung ICT Center Lantai 4 Jl. Prof. Sudarto, SH Tembalang,
                                        Semarang Kode Pos 50275 Telepon (024) 7460032, Fax (024) 7460039
                                        www.lppm.undip.ac.id, email: lppm@live.undip.ac.id.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- right -->
            <div class="login__content-right">
                <div class="login__content-right__body">
                    <h2 class="login__title">Login</h2>
                    <p class="mb-1">
                        Selamat datang <span class="fw-bold"><?= $nama; ?>
                        </span>!
                    </p>
                    <p class="login__desc__unit mb-4">Silahkan pilih unit yang ingin Anda kunjungi. Harap masukkan unit
                        sesuai dengan unit Anda!</p>
<<<<<<< Updated upstream
                    <form class="form__login" method="POST"
                        action="/auth/loginprocess/<?= $email; ?>"
                        id="formLoginUnit">
=======

                    <form class="form__login" method="POST" action="/auth/loginprocess/<?= $email; ?>" id="formLoginUnit">
>>>>>>> Stashed changes
                        <div class="mb-4 position-relative" id="formFieldTahun">
                            <label for="tahun" class="form-label form__label">Tahun</label>
                            <select class="form-select form__select shadow-none" name="tahun" id="tahun" required>
                                <option selected disabled>Pilih Tahun</option>
                                <?php foreach ($tahun as $tahun) : ?>
                                    <option value="<?= $tahun['tahun']; ?>">
                                        <?= $tahun['tahun']; ?>
                                    </option>
                                <?php endforeach; ?>
                            </select>
                        </div>
                        <div class="mb-4 position-relative" id="formFieldRole">
                            <label for="role" class="form-label form__label">Role</label>
                            <select class="form-select form__select shadow-none" name="role" id="role" required>
                                <option selected disabled>Pilih Role</option>
                            </select>
                        </div>
                        <div class="position-relative" id="formFieldUnit">
                            <label for="unit" class="form-label form__label">Unit</label>
                            <select class="form-select form__select shadow-none" name="unit" id="unit" required>
                                <option selected disabled>Pilih Unit</option>
                            </select>
                        </div>
                        <div class="mb-5"></div>
                        <button type="submit" class="btn login__btn shadow-none" id="btnLoginUnit">Login</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- scripts -->
    <!-- jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous">
    </script>
    <!-- jquery validate -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js" integrity="sha512-37T7leoNS06R80c8Ulq7cdCDU5MNQBwlYoy1TX/WUsLFC2eYNqtKlV0QjH7r8JpG/S0GUMZwebnVFLPd6SU5yg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- fontawesome -->
    <script defer src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" integrity="sha384-vLLEq/Un/eZFmXAu4Xxf8F00RSSMzPcI7iDiT6hpB4zFpezCEGhb5daeR8PLyrLI" crossorigin="anonymous">
    </script>
    <!-- custom -->
    <script>
        // initial hide field unit
        $("#formFieldUnit").hide();
        // iniital exclamation icon
        const exclamationCircle = "<i class='fa-solid fa-circle-exclamation'></i>";

        // document ready function
        $(document).ready(function() {
            // change data select option
            $("#tahun").change(function() {
                var tahun = $(this).val();
                $.ajax({
                    url: "<?= base_url('auth/getrole/' . $email) ?>",
                    type: "POST",
                    data: {
                        tahun: tahun,
                    },
                    dataType: "json",
                    success: function(response) {
                        $("#role").html(response);
                    },
                });
            });
            $("#role").change(function() {
                var id = $(this).val();
                var tahun = $('#tahun').val();
                $.ajax({
                    url: "<?= base_url('auth/getunit/' . $email) ?>",
                    type: "POST",
                    data: {
                        role_id: id,
                        tahun: tahun,
                    },
                    dataType: "json",
                    success: function(response) {
                        $("#unit").html(response);
                    },
                });
            });

            // show field unit
            $("#role").change(function() {
                var value = $(this).val();
                if (value == "1" || value == "3") {
                    $("#formFieldUnit").show();
                } else {
                    $("#formFieldUnit").hide();
                }
            });

            // form validate
            $("#formLoginUnit").validate({
                rules: {
                    tahun: {
                        required: true,
                    },
                    role: {
                        required: true,
                    },
                    unit: {
                        required: true,
                    },
                },
                messages: {
                    tahun: {
                        required: exclamationCircle + " Tahun is required.",
                    },
                    role: {
                        required: exclamationCircle + " Role is required.",
                    },
                    unit: {
                        required: exclamationCircle + " Unit is required.",
                    },
                },
            });

            $("#btnLoginUnit").on("click", () => {
                console.log($("#formLoginUnit").valid());
            });
        });
    </script>
</body>

</html>